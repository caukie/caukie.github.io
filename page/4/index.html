<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta name="generator" content="Hugo 0.60.1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>cake918小屋 | 数卷禅宗语，几点相思泪！佛曰：觉有情！</title>
    <meta property="og:title" content="cake918小屋 | 数卷禅宗语，几点相思泪！佛曰：觉有情！">
    <meta property="og:type" content="website">
    <meta name="Keywords" content="生活，技术">
    <meta name="description" content="cake918的个人空间">
    <meta property="og:url" content="https://www.yangwenchao.com/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="/css/normalize.css">
    
    <link rel="stylesheet" href="/css/style.css">
    <link rel="alternate" type="application/rss+xml+xml" href="https://www.yangwenchao.com/index.xml" title="cake918小屋" />
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    


    
    
</head>


<body>
<header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <h1>
                        <a id="logo" href="https://www.yangwenchao.com">
                            cake918小屋
                        </a>
                    </h1>
                
                <p class="description">数卷禅宗语，几点相思泪！佛曰：觉有情！</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://www.yangwenchao.com">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>


<div id="body">
    <div class="container">
        <div class="col-group">

            <div class="col-8" id="main">
                <div class="res-cons">
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://www.yangwenchao.com/post/life/2018/2018-12-26-wu/" title="雾" >雾</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年12月26日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://www.yangwenchao.com/categories/%E7%94%9F%E6%B4%BB">生活</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                雾
登罢高楼望天涯， 天涯尽在寸光中。 蓬莱咫尺语呢喃， 瑶池比邻舞玲珑。
嫦娥奔月应迷路， 夸父逐日亦失踪。 人海茫茫何所穷， 一苇渡之世皆空！……
                            </div>
                            <p class="readmore"><a href="https://www.yangwenchao.com/post/life/2018/2018-12-26-wu/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://www.yangwenchao.com/post/life/2018/2018-11-27-wu/" title="雾" >雾</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年11月27日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://www.yangwenchao.com/categories/%E7%94%9F%E6%B4%BB">生活</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                雾
莫要卷帘观花容， 红绿迷离色濛濛。 不必回首觅芳踪， 灯火阑珊影幢幢。
金风玉露且错过， 断桥苏堤不相逢。 大象无形成一统， 千里姻缘至此终。……
                            </div>
                            <p class="readmore"><a href="https://www.yangwenchao.com/post/life/2018/2018-11-27-wu/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://www.yangwenchao.com/post/life/2018/2018-11-12-yexing/" title="夜孤行" >夜孤行</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年11月12日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://www.yangwenchao.com/categories/%E7%94%9F%E6%B4%BB">生活</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                夜孤行
夜半细雨潇潇，单骑行于归途，于昏灯冷光间，见二人影，一黑衣，一白裳，伸手相招，似是故人。
衣黑者曰：吾兄弟二人值守此间，近日总逢兄台夜行于此，莫非同道，愿闻大名！
余拱手答曰：非也，非也，芸芸天地间一苍生草芥耳，夜行余此，实为生计也！
白裳者对曰：然人世如此凄苦，不若随吾兄弟二人去地府，比这世间逍遥自在！其处虽为十八层，并非地狱，为世人谬传所误，并无铜烙铁烧，亦非油炸汤镬，乃另一极乐世界也！
对曰：人生在世，喜怒哀乐，日常情也，奔波劳碌，分内事也。有父母可孝，有兄弟可敬，有妻儿可亲，此间足矣，不做非分之想，不言虚妄之语，不求无谓之福！
黑衣者悚身曰：所言是也，人常悲朝露之易逝，伤春花之易凋，叹人生之苦短。而人非朝露，不知朝露之生也无穷；人非春花，不知花容之永存，人之生也短狭，而不知死也长留！
白裳者亦叹曰：世人迷醉，惑于耳目，妄求极乐，实乃南辕北辙耳！
对之：拜服二位高论，醍醐灌顶，平生所为有之见也！
黑白拱手曰：亦叹风采，就此别过，后会有期也！……
                            </div>
                            <p class="readmore"><a href="https://www.yangwenchao.com/post/life/2018/2018-11-12-yexing/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://www.yangwenchao.com/post/life/2018/2018-11-11-yexing/" title="夜行" >夜行</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年11月11日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://www.yangwenchao.com/categories/%E7%94%9F%E6%B4%BB">生活</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                夜行
檐铃无端鸣铿锵， 落叶有情舞霓裳。 丑末寅初气萧瑟， 绝尘一骑行路忙！……
                            </div>
                            <p class="readmore"><a href="https://www.yangwenchao.com/post/life/2018/2018-11-11-yexing/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://www.yangwenchao.com/post/life/2018/2018-11-10-yexing/" title="夜行" >夜行</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年11月10日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://www.yangwenchao.com/categories/%E7%94%9F%E6%B4%BB">生活</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                夜行
夙夜披新露， 风尘起寒烟。 踏马飞奔去， 唯余檐铃响！……
                            </div>
                            <p class="readmore"><a href="https://www.yangwenchao.com/post/life/2018/2018-11-10-yexing/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://www.yangwenchao.com/post/life/2018/2018-11-09-ougan/" title="无心" >无心</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年11月9日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://www.yangwenchao.com/categories/%E7%94%9F%E6%B4%BB">生活</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                无心
君之所弃，人之所求，君贱之如敝屣，人视之如珍宝！君得之若等闲，人仰之同登天！
人我殊途，取舍迥异，虽为一物，而势隔云泥，均用一力，然量分霄汉！
其中悬差，不可平也，唯得失之悲欢，其意一也！……
                            </div>
                            <p class="readmore"><a href="https://www.yangwenchao.com/post/life/2018/2018-11-09-ougan/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://www.yangwenchao.com/post/life/2018/2018-10-15-menqianjing/" title="院前略景" >院前略景</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年10月15日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://www.yangwenchao.com/categories/%E7%94%9F%E6%B4%BB">生活</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                院前略景
一树馥郁暗香重， 半帘空濛黛色轻。 不求人间好风物， 绝妙美色入眼前！ ……
                            </div>
                            <p class="readmore"><a href="https://www.yangwenchao.com/post/life/2018/2018-10-15-menqianjing/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://www.yangwenchao.com/post/life/2018/2018-04-02-lirenzhisang/" title="里人治丧" >里人治丧</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年4月2日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://www.yangwenchao.com/categories/%E7%94%9F%E6%B4%BB">生活</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                里人治丧
楼上阵阵经忏，楼下排排花圈，里人治丧，今又亲临，幸甚至哉！
锣鼓喧嚣，唢呐悠扬，已是四月天，怎把元宵闹？莫不是，恐负好春光，夜半不得闲？ 奠字悬中，花圈迎道，值此百花期，先人驾鹤去！且将那，佛号圣经诵，不意小倩来。……
                            </div>
                            <p class="readmore"><a href="https://www.yangwenchao.com/post/life/2018/2018-04-02-lirenzhisang/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://www.yangwenchao.com/post/life/2018/2018-03-24-tachun/" title="太子湾踏春" >太子湾踏春</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年3月24日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://www.yangwenchao.com/categories/%E7%94%9F%E6%B4%BB">生活</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                太子湾踏春
柳垂青丝，皎容常伏波以悦己目；樱覆白雪，馥郁且乘风以快人心。
游者肩踵相继，幽径寸步难行。鸟语同人语相和，花海共人海争春。
人赏花焉？人观人焉？花弄人也！ ……
                            </div>
                            <p class="readmore"><a href="https://www.yangwenchao.com/post/life/2018/2018-03-24-tachun/">阅读全文</a></p>
                        </article>
                    
                    
		    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://www.yangwenchao.com/post/tech/2018/2018-12-25-wangguan1/" title="严选API网关构建实践" >严选API网关构建实践</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2018年1月24日
                            </date>
                            
                            <div class="post-meta">
                                <span>|</span>
                                
                                <span class="meta-category"><a href="https://www.yangwenchao.com/categories/%E6%8A%80%E6%9C%AF">技术</a></span>
                                
                            </div>
                            
                            <div class="post-content">
                                此处应有背景 近几年微服务架构如日中天，微服务化亦是大势所趋，严选的微服务化改造也已初具规模，基于Sidecar模式的服务网格渐趋稳定，其基本架构如下：（图片引自网络） 数据面部分，Sidecar代理采用nginx，并基于nginx扩展，包括服务发现，负载均衡，健康检查等。其控制面为Consul管理平台。 同时部分sidecar功能，也被嵌入到tomcat容器或第三方Client中，如链路跟踪，流量采样等，其控制面为apolloY配置中心。 关于Sidecar的介绍，没有比原图更直观的了！（图片引自网络） 与此同时，作为微服务架构中不可或缺的组成部分：API Gateway，也就应运而生。
合适的才是最好的 根据活跃度、语言、支持功能、上手难易等，对开源社区（Tky，MicroGateway，Zuul，Kong等）进行比较分析。 除了网关基本功能之外，我们更关注于性能以及可扩展性，因此倾向于非Java的实现，同时考虑到入门门槛、后续的发展，最终锁定了Kong。 Kong的详细介绍，参考官方文档：https://konghq.com/kong-community-edition/。 Openresty部分，从原理到应用，可参看官方文档。
一切从源码开始 从官方Fork了当时最新版本0.2.3（截至本文书写时，官方已更新至1.0.0版本），参考编译安装手册，依次安装Openresty，Luarocks，Kong，PostgreSQL。除了LUA环境、Openssl依赖小有波澜，一切进展顺利，首个进程轻松启动。 良好的开始是成功的一半！实践证明，这里只是整个进度条的1%！之后我们优化了Openresty的依赖模块，标准化了环境变量的路径以及应用的安装路径，最终输出了严选API网关的编译安装手册以及自动化脚本。
大道至简，天下归一 在已有场景下，一个应用节点更新，首先需要到Consul平台进行下线（很nice），而另外还需要SA协助从入口Nginx调整域名的Upstream配置（很简陋）。一者，服务更新的复杂度高，再者，额外依赖了SA的操作。结果就是导致服务更新的笨重！因此，网关引入consul-module，集成Sidecar的服务注册发现功能，之后，不论访问方式如何，业务只需要关心Consul平台的配置即可，简单易行，皆大欢喜。 同时，已有Kong配置，缺少对API的有效标识，在严选Consul架构下，网关对单个Location进行有效的定义：产品名+服务名+接口名，一方面，将无意义的Location进行命名，方便记忆；另一方面，根据定义好的名字，可以快速检索配置。
物以类聚，分而治之 集群部署隔离 商业版提供了完整的管理平台，对集群、插件、监控等进行管理。而严选环境下，我们也需要根据网络环境、使用场景、入口业务进行集群区分，进而实现资源隔离！ 根据网络环境，目前区分了：测试网关集群，内网网关集群，外网网关集群等； 根据使用场景，目前区分了：出口网关集群，ABTest网关集群，压测网关集群等； 根据入口业务，目前区分了：主站网关集群，活动网关集群，Openapi网关集群等； 如上图所示，实际我们先根据网络环境区分大集群，然后根据业务、场景再细分子集群。
接口访问隔离  业务接口的访问：  依赖于身份验证插件，进行接口级别的租户信息验证。为此，我们扩充了租户管理，可以配置租户的验证策略，以及租户级别的频控等策略。
 管理接口的暴露：  仅支持本地IP访问，且只暴露监控数据的获取接口；
配置管理隔离 基于严选已有的权限中心，我们结合API网关的配置页面，细化了面向API网关的访问权限。
 用户：  可以走openpid进行登录的所有corp账号，创建是需要指定所属的角色；
 角色：  可以定制不同角色可见的模块，比如业务方只需要查看监控模块、插件配置，不可进行操作；
 群组：  API创建时，需要指定其所属群组，群组下可以添加具体的用户，此时，该用户只能看到该群组下的API配置信息； 如上图所示， 用户 &ndash; 角色 &ndash; API：操作权限控制 用户 &ndash; 群组 &ndash; API：API业务隔离
战战兢兢，如履薄冰 可维护 作为所有业务的总入口，一旦有风吹草动，那必然是一石激起千层浪！除了服务稳定性，我们把日常的运维工作作为重中之重！
 统计报表  多维度实时查看线上流量、响应错误码、响应时间、TCP链接数等，方便第一时间确认问题点。
 监控告警  基于实时平台，对异常日志、错误请求进行实时监控。 基于运维平台，对系统基础资源，包括CPU，内存，磁盘等进行实时监控。 一旦出现异常及时告警，目前我们依赖了锦衣卫以及邮件进行相关的告警通知。 由于网关数据流量大，在此仅对异常请求数据进行入库，目前使用Elasticsearch进行存储，方便问题的定位分析。……
                            </div>
                            <p class="readmore"><a href="https://www.yangwenchao.com/post/tech/2018/2018-12-25-wangguan1/">阅读全文</a></p>
                        </article>
                    
                    
                    



<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://www.yangwenchao.com/page/3/">上一页</a>
    </li>
    

    
    <li >
        <a href="https://www.yangwenchao.com/">1</a>
    </li>
    
    <li >
        <a href="https://www.yangwenchao.com/page/2/">2</a>
    </li>
    
    <li >
        <a href="https://www.yangwenchao.com/page/3/">3</a>
    </li>
    
    <li  class="current">
        <a href="https://www.yangwenchao.com/page/4/">4</a>
    </li>
    
    <li >
        <a href="https://www.yangwenchao.com/page/5/">5</a>
    </li>
    
    <li >
        <a href="https://www.yangwenchao.com/page/6/">6</a>
    </li>
    

    
    <li class="next">
        <a href="https://www.yangwenchao.com/page/5/">下一页</a>
    </li>
    
</ol>



                </div>
            </div>

            <div id="secondary">
    <section class="widget">
        <form id="search" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://www.yangwenchao.com">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://www.yangwenchao.com/post/life/2020/2020-06-06-wuhezhizhong/" title="乌合之众">乌合之众</a>
    </li>
    
    <li>
        <a href="https://www.yangwenchao.com/post/life/2020/2020-05-30-youtangqi/" title="游塘栖">游塘栖</a>
    </li>
    
    <li>
        <a href="https://www.yangwenchao.com/post/life/2020/2020-05-15-nandubeigui/" title="南渡北归">南渡北归</a>
    </li>
    
    <li>
        <a href="https://www.yangwenchao.com/post/life/2020/2020-05-15-yongledadian1/" title="永乐大典一">永乐大典一</a>
    </li>
    
    <li>
        <a href="https://www.yangwenchao.com/post/life/2020/2020-04-19-helinyulu/" title="鹤林玉露">鹤林玉露</a>
    </li>
    
    <li>
        <a href="https://www.yangwenchao.com/post/life/2020/2020-03-31-guiyu/" title="鬼语">鬼语</a>
    </li>
    
    <li>
        <a href="https://www.yangwenchao.com/post/life/2020/2020-03-29-shishuoxinyu/" title="世说新语">世说新语</a>
    </li>
    
    <li>
        <a href="https://www.yangwenchao.com/post/life/2020/2020-03-21-caigentan/" title="菜根谭">菜根谭</a>
    </li>
    
    <li>
        <a href="https://www.yangwenchao.com/post/life/2020/2020-03-08-tangzhiyan/" title="唐摭言">唐摭言</a>
    </li>
    
    <li>
        <a href="https://www.yangwenchao.com/post/life/2020/2020-01-20-wubing/" title="无病">无病</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
    <li><a href="https://www.yangwenchao.com/categories/%E6%8A%80%E6%9C%AF/">技术 (4)</a></li>
    
    <li><a href="https://www.yangwenchao.com/categories/%E7%94%9F%E6%B4%BB/">生活 (53)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="https://www.yangwenchao.com/tags/%E5%81%B6%E6%84%9F/">偶感</a>
    
    <a href="https://www.yangwenchao.com/tags/%E6%8A%80%E6%9C%AF/">技术</a>
    
    <a href="https://www.yangwenchao.com/tags/%E7%94%9F%E6%B4%BB/">生活</a>
    
    <a href="https://www.yangwenchao.com/tags/%E7%AC%94%E8%AE%B0/">笔记</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://xiaodongliu.com/" title="晓东的博客">晓东的博客</a>
        </li>
        
        <li>
            <a target="_blank" href="https://www.eyeori.xyz" title="皆绮的博客">皆绮的博客</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://www.yangwenchao.com/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
        </div>
    </div>
</div>
<footer id="footer">
    <div class="container">
        &copy; 2020 <a href="https://www.yangwenchao.com">cake918小屋 By </a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank">Theme</a> based on <a href="https://github.com/rujews/maupassant-hugo" target="_blank">maupassant</a>.
        
        <a href="http://beian.miit.gov.cn" target="_blank">备案号：浙ICP备19050836号</a>.
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src="/js/totop.js?v=0.0.0" async=""></script>







</body>
</html>
